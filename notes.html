<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Minhas Notas • TPG Online</title>
  <meta name="description" content="Bloco de notas pessoal por usuário no TPG Online.">

  <!-- Bootstrap + Tema -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <link rel="stylesheet" href="assets/css/theme.css">
  <link rel="stylesheet" href="assets/css/notes.css">

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ6RD9SGHR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('consent', 'default', { 'ad_storage': 'denied', 'analytics_storage': 'denied' });
    gtag('js', new Date());
    gtag('config', 'G-XZ6RD9SGHR');
  </script>
</head>
<body>

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W2LG2C7K"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

  <!-- Includes -->
  <div data-include="/assets/partials/cookie-banner.html"></div>
  <div data-include="/assets/partials/navbar.html"></div>

  <main class="section">
    <div class="container container-narrow">
      <header class="mb-4 text-center">
        <h1 class="h3 fw-bold mb-1">Minhas Notas</h1>
        <p class="text-muted-2 mb-1">
          Um espaço simples para você guardar ideias, lembretes e rascunhos.
        </p>
        <p id="notes-username" class="small text-info"></p>
      </header>

      <!-- Formulário de criação/edição -->
      <section class="mb-4">
        <div class="card bg-surface border-0 shadow-sm">
          <div class="card-body">
            <h2 class="h6 fw-semibold mb-2" id="note-form-title">Nova nota</h2>
            <form id="note-form" class="row g-3" novalidate>
              <input type="hidden" id="note-id" />
              <div class="col-12">
                <label for="note-title" class="form-label">Título</label>
                <input
                  id="note-title"
                  type="text"
                  class="form-control"
                  placeholder="Ex.: Ideias para o projeto X"
                  required
                />
              </div>
              <div class="col-12">
                <label for="note-content" class="form-label">Conteúdo</label>
                <textarea
                  id="note-content"
                  class="form-control"
                  rows="4"
                  placeholder="Digite aqui suas notas..."
                  required
                ></textarea>
              </div>
              <div class="col-12 d-flex gap-2">
                <button type="submit" class="btn btn-primary" id="note-submit-btn">
                  Salvar nota
                </button>
                <button type="button" class="btn btn-outline-light d-none" id="note-cancel-edit">
                  Cancelar edição
                </button>
              </div>
              <div id="note-message" class="small mt-1 text-muted-2"></div>
            </form>
          </div>
        </div>
      </section>

      <!-- Lista de notas -->
      <section>
        <div class="d-flex justify-content-between align-items-center mb-2">
          <h2 class="h6 fw-semibold mb-0">Notas salvas</h2>
          <button type="button" class="btn btn-sm btn-outline-light" id="notes-refresh-btn">
            Atualizar
          </button>
        </div>
        <div id="notes-status" class="small text-muted-2 mb-2"></div>
        <div id="notes-list" class="notes-grid"></div>
      </section>
    </div>
  </main>

  <!-- Rodapé -->
  <div data-include="/assets/partials/footer.html"></div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
  <script src="assets/js/includes.js" defer></script>
  <script src="assets/js/check-session.js" defer></script>
  <script src="assets/js/auth-guard.js" defer></script>
  <script src="assets/js/notes.js" defer></script>
  
</body>
</html>
